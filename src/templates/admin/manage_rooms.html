{% extends "base.html" %}

{% block title %}Manage Rooms{% endblock %}

{% block content %}
<section class="card table-card">
  <div class="actions-row" style="justify-content: space-between; margin-bottom: 18px">
    <div>
      <h1 class="page-title" style="margin: 0">Manage Rooms</h1>
      <p class="subtitle" style="margin-bottom: 0">Add, edit, or remove rooms from the catalogue.</p>
    </div>
    <div class="actions-row" style="gap: 10px">
      <a href="{{ url_for('dashboard.dashboard') }}" class="btn secondary small">Dashboard</a>
      <a href="{{ url_for('admin.add_room') }}" class="btn small">+ Add New Room</a>
    </div>
  </div>
  {% if rooms %}
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Building</th>
        <th>Room Number</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for room in rooms %}
      <tr>
        <td>{{ room.id }}</td>
        <td>{{ room.building }}</td>
        <td>{{ room.number }}</td>
        <td>
          <span class="status-pill {{ 'status-available' if room.status == 'Available' else 'status-occupied' }}">{{ room.status }}</span>
        </td>
        <td>
          <div class="actions-row">
            <a href="{{ url_for('admin.edit_room', room_id=room.id) }}" class="btn secondary small">Edit</a>
            <form method="POST" action="{{ url_for('admin.delete_room', room_id=room.id) }}" onsubmit="return confirm('Delete this room?');">
              <button type="submit" class="btn danger small">Delete</button>
            </form>
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p class="secondary-text">No rooms found. <a href="{{ url_for('admin.add_room') }}">Add one now</a>.</p>
  {% endif %}
</section>
{% endblock %}
